"use strict";
(self["webpackChunkmy_web"] = self["webpackChunkmy_web"] || []).push([["src_pages_myAppsIconSetting_index_jsx-my-cli_node_modules_antd_es_progress_style_index_less-m-d413b4"],{

/***/ 32776:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ myAppsIconSetting)
});

// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/upload/style/index.js + 3 modules
var style = __webpack_require__(99766);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/upload/index.js + 54 modules
var upload = __webpack_require__(50491);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/style/index.js + 1 modules
var button_style = __webpack_require__(85793);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/index.js
var es_button = __webpack_require__(31481);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tooltip/style/index.js + 1 modules
var tooltip_style = __webpack_require__(90921);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tooltip/index.js + 3 modules
var tooltip = __webpack_require__(16606);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/style/index.js + 1 modules
var message_style = __webpack_require__(35735);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/index.js + 3 modules
var message = __webpack_require__(96213);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tabs/style/index.js + 1 modules
var tabs_style = __webpack_require__(45783);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tabs/index.js + 22 modules
var tabs = __webpack_require__(89274);
// EXTERNAL MODULE: ../my-cli/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(92910);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);
// EXTERNAL MODULE: consume shared module (default) react@^16.14.0 (singleton) (fallback: ../my-cli/node_modules/react/index.js)
var index_js_ = __webpack_require__(93121);
var index_js_default = /*#__PURE__*/__webpack_require__.n(index_js_);
;// CONCATENATED MODULE: ./src/pages/myAppsIconSetting/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const index_module = ({"modalBox":"src-pages-myAppsIconSetting-index-module__modalBox","iconsBox":"src-pages-myAppsIconSetting-index-module__iconsBox","active":"src-pages-myAppsIconSetting-index-module__active","imagesBox":"src-pages-myAppsIconSetting-index-module__imagesBox"});
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/QuestionCircleOutlined.js + 1 modules
var QuestionCircleOutlined = __webpack_require__(45157);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/UploadOutlined.js + 1 modules
var UploadOutlined = __webpack_require__(33154);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/SnippetsOutlined.js + 1 modules
var SnippetsOutlined = __webpack_require__(31361);
// EXTERNAL MODULE: ./src/utils/request.js
var request = __webpack_require__(96648);
;// CONCATENATED MODULE: ./src/pages/myAppsIconSetting/service.js
/**
 * Service
 * @author
 */var getImage=function getImage(options){return new Promise(function(resolve,reject){(0,request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/image/query',type:'json',body:options||{}}).then(function(res){resolve(res);});});};var removeImage=function removeImage(options){return new Promise(function(resolve,reject){(0,request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/image/remove',type:'json',body:options||{}}).then(function(res){resolve(res);});});};
;// CONCATENATED MODULE: ./src/pages/myAppsIconSetting/paste.js
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var blobToDataUrl=function blobToDataUrl(blob){return new Promise(function(resolve,reject){var a=new FileReader();a.onload=function(e){resolve(e.target.result);};a.readAsDataURL(blob);});};var paste=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(){var clipboardData,clipboardItems,imgBase64Data,_iterator,_step,clipboardItem,_iterator2,_step2,type,blob;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:clipboardData=window.navigator.clipboard;_context.next=3;return clipboardData.read();case 3:clipboardItems=_context.sent;imgBase64Data=[];_iterator=_createForOfIteratorHelper(clipboardItems);_context.prev=6;_iterator.s();case 8:if((_step=_iterator.n()).done){_context.next=32;break;}clipboardItem=_step.value;_iterator2=_createForOfIteratorHelper(clipboardItem.types);_context.prev=11;_iterator2.s();case 13:if((_step2=_iterator2.n()).done){_context.next=22;break;}type=_step2.value;if(!(type==='image/png'||type==='text/plain')){_context.next=20;break;}_context.next=18;return clipboardItem.getType(type);case 18:blob=_context.sent;//const result = await blobToDataUrl(blob);
imgBase64Data.push(blob);case 20:_context.next=13;break;case 22:_context.next=27;break;case 24:_context.prev=24;_context.t0=_context["catch"](11);_iterator2.e(_context.t0);case 27:_context.prev=27;_iterator2.f();return _context.finish(27);case 30:_context.next=8;break;case 32:_context.next=37;break;case 34:_context.prev=34;_context.t1=_context["catch"](6);_iterator.e(_context.t1);case 37:_context.prev=37;_iterator.f();return _context.finish(37);case 40:return _context.abrupt("return",imgBase64Data);case 41:case"end":return _context.stop();}}},_callee,null,[[6,34,37,40],[11,24,27,30]]);}));return function paste(){return _ref.apply(this,arguments);};}();/* harmony default export */ const myAppsIconSetting_paste = (paste);
;// CONCATENATED MODULE: ./src/pages/myAppsIconSetting/index.jsx
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function myAppsIconSetting_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function myAppsIconSetting_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){myAppsIconSetting_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){myAppsIconSetting_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/**
 * IconModal
 * @author tianyanrong
 * @date 2022/2/8 下午4:36:17
 */var TabPane=tabs/* default.TabPane */.Z.TabPane;var IconItem=/*#__PURE__*/function(_Component){_inherits(IconItem,_Component);var _super=_createSuper(IconItem);function IconItem(){var _this;_classCallCheck(this,IconItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.getImages=/*#__PURE__*/function(){var _ref=myAppsIconSetting_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(isSvg){var options,res,data;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=isSvg?{type:'svg'}:{type:'img'};_context.next=3;return getImage(options);case 3:res=_context.sent;data=res.data||[];_this.setState({images:(data||[]).map(function(item){return item.url;}),activeKey:isSvg?1:2,imgUrls:[],type:''});case 6:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.removeImage=/*#__PURE__*/myAppsIconSetting_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee2(){var _this$state,imgUrls,activeKey,res;return regenerator_default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,imgUrls=_this$state.imgUrls,activeKey=_this$state.activeKey;_context2.next=3;return removeImage({urls:imgUrls});case 3:res=_context2.sent;if(res.result==='success'){message/* default.success */.ZP.success('删除成功！');_this.getImages(Number(activeKey)===1?true:false);}else{message/* default.error */.ZP.error('删除失败，请重试！');}case 5:case"end":return _context2.stop();}}},_callee2);}));_this.action='/lowcodeApi/auth/uploadimg/app';_this.sendPasteImg=function(data){var formdata=new FormData();formdata.append('avatar',data);var xhr=new XMLHttpRequest();xhr.open("post",_this.action);xhr.send(formdata);xhr.onload=function(){if(xhr.status==200){var response=xhr.response;try{var res=JSON.parse(response);if(res.data&&res.data.url){_this.getImages(res.data.url.match(/\.svg$/)?true:false);}else{message/* default.error */.ZP.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25");}}catch(e){console.log(e);}console.log(xhr.response);//...
}};};_this.paste=/*#__PURE__*/function(){var _ref3=myAppsIconSetting_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee3(e){var base64Data;return regenerator_default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.stopPropagation();e.preventDefault();_context3.next=4;return myAppsIconSetting_paste();case 4:base64Data=_context3.sent;if(base64Data.length){base64Data.forEach(function(item){_this.sendPasteImg(item);});}return _context3.abrupt("return",false);case 7:case"end":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();return _this;}_createClass(IconItem,[{key:"componentDidMount",value:function componentDidMount(){this.getImages(true);}},{key:"render",value:function render(){var _this2=this;var _this$state2=this.state,images=_this$state2.images,uploadIng=_this$state2.uploadIng,imgUrls=_this$state2.imgUrls,activeKey=_this$state2.activeKey;return/*#__PURE__*/index_js_default().createElement("div",{className:index_module.modalBox},/*#__PURE__*/index_js_default().createElement("div",{style:{margin:'15px 0 15px 0'}},/*#__PURE__*/index_js_default().createElement("div",{style:{float:'right',lineHeight:'30px',color:'#d48806',fontSize:'20px'}},/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{placement:"leftBottom",title:/*#__PURE__*/index_js_default().createElement("ol",{style:{margin:'0',padding:'10px 0 10px 20px'}},/*#__PURE__*/index_js_default().createElement("li",null,"\u4E0A\u4F20\u56FE\u7247: \u4E0A\u4F20\u652F\u6301svg\u3001png\u3001gif\u3001jpeg\u3001jpg\u683C\u5F0F\u7684\u56FE\u7247\uFF1B"),/*#__PURE__*/index_js_default().createElement("li",null,"\u4ECE\u526A\u5207\u677F\u4E2D\u590D\u5236\u56FE\u7247: \u590D\u5236svg\u56FE\u7247\u65F6\uFF0C\u662F\u590D\u5236svg\u4EE3\u7801\uFF01"),/*#__PURE__*/index_js_default().createElement("li",null,"\u5220\u9664\u56FE\u7247: \u975E\u7269\u7406\u5220\u9664\uFF0C\u56FE\u7247\u4F9D\u7136\u53EF\u4EE5\u8BBF\u95EE\u5230\uFF0C\u53EA\u662F\u5728\u6B64\u5E94\u7528\u7684\u201C\u56FE\u7247\u9009\u62E9\u201C\u5F39\u51FA\u6846\u4E2D\u4E0D\u5C55\u793A\u3002"),/*#__PURE__*/index_js_default().createElement("li",null,"\u56FE\u6807\u8D44\u6E90: ",/*#__PURE__*/index_js_default().createElement("a",{target:'_blank',href:"https://iconpark.oceanengine.com/official"},"\u5B57\u8282\u7684\u56FE\u6807\u8D44\u6E90")))},/*#__PURE__*/index_js_default().createElement(QuestionCircleOutlined/* default */.Z,null))),/*#__PURE__*/index_js_default().createElement(upload/* default */.Z,{name:'avatar',action:this.action,onChange:function onChange(info){if(info.file.status==='uploading'){_this2.setState({uploadIng:true});}if(info.file.status==='done'){_this2.setState({uploadIng:false});var url=info.file&&info.file.response&&info.file.response.data&&info.file.response.data.url;_this2.getImages(url.match(/\.svg$/)?true:false);}else if(info.file.status==='error'){message/* default.error */.ZP.error("".concat(info.file.name," \u4E0A\u4F20\u5931\u8D25"));_this2.setState({uploadIng:false});}}},/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{loading:uploadIng,ghost:true,type:'primary',icon:/*#__PURE__*/index_js_default().createElement(UploadOutlined/* default */.Z,null)},"\u4E0A\u4F20\u56FE\u7247")),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{style:{marginLeft:'10px'},ghost:true,type:'primary',onClick:this.paste,icon:/*#__PURE__*/index_js_default().createElement(SnippetsOutlined/* default */.Z,null)},"\u4ECE\u526A\u5207\u677F\u4E2D\u590D\u5236\u56FE\u7247")),/*#__PURE__*/index_js_default().createElement(tabs/* default */.Z,{type:"card",activeKey:activeKey+'',tabBarExtraContent:/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{disabled:imgUrls&&imgUrls.length?false:true,size:"small",onClick:function onClick(){_this2.removeImage();}},"\u5220\u9664\u9009\u4E2D\u7684",Number(activeKey)===1?'图标':'图片'),onChange:function onChange(activeKey){_this2.setState({activeKey:activeKey,images:[]});_this2.getImages(Number(activeKey)===1?true:false);}},/*#__PURE__*/index_js_default().createElement(TabPane,{tab:"SVG\u56FE\u6807",key:"1"},/*#__PURE__*/index_js_default().createElement("ul",{className:index_module.iconsBox},(images||[]).map(function(url){return/*#__PURE__*/index_js_default().createElement("li",{onClick:function onClick(){var isHadUrlIndex=imgUrls.indexOf(url);var newImgUrls=[].concat(imgUrls);if(isHadUrlIndex>=0){newImgUrls.splice(isHadUrlIndex,1);}else{newImgUrls.push(url);}_this2.setState({imgUrls:newImgUrls,type:'img'});},className:imgUrls.indexOf(url)>=0?index_module.active:''},/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("img",{src:url})));}))),/*#__PURE__*/index_js_default().createElement(TabPane,{tab:"\u5176\u5B83\u56FE\u7247",key:"2"},/*#__PURE__*/index_js_default().createElement("ul",{className:index_module.imagesBox},(images||[]).map(function(url){return/*#__PURE__*/index_js_default().createElement("li",{className:imgUrls.indexOf(url)>=0?index_module.active:'',onClick:function onClick(){var isHadUrlIndex=imgUrls.indexOf(url);var newImgUrls=[].concat(imgUrls);if(isHadUrlIndex>=0){newImgUrls.splice(isHadUrlIndex,1);}else{newImgUrls.push(url);}_this2.setState({imgUrls:newImgUrls,type:'img'});}},/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("img",{src:url})));})))));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.visible&&nextProps.visible!==prevState.visible){return{visible:nextProps.visible,imgUrls:[],type:''};}return{visible:nextProps.visible};}}]);return IconItem;}(index_js_.Component);/* harmony default export */ const myAppsIconSetting = (IconItem);

/***/ })

}]);